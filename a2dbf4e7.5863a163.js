(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{210:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return p}));var o=t(1),r=t(9),a=(t(0),t(252)),i={id:"blocks-block-from-components",title:"Creating Block from Components"},s={id:"legacy/v4/guides/blocks-block-from-components",title:"Creating Block from Components",description:"[![docs-source](https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a)](https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/custom/button)",source:"@site/docs/legacy/v4/guides/blocks-block-from-components.md",permalink:"/eightshift-docs/docs/legacy/v4/guides/blocks-block-from-components",sidebar:"docs",previous:{title:"Manifest Structure",permalink:"/eightshift-docs/docs/legacy/v4/guides/blocks-structure-manifest"},next:{title:"Render Block View Helper",permalink:"/eightshift-docs/docs/legacy/v4/guides/blocks-render-block-view-helper"}},c=[{value:"Folder structure",id:"folder-structure",children:[]},{value:"Manifest",id:"manifest",children:[]},{value:"Components",id:"components",children:[]},{value:"Editor render",id:"editor-render",children:[]},{value:"PHP view",id:"php-view",children:[]},{value:"Styling",id:"styling",children:[]}],l={rightToc:c};function p(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/custom/button"}),Object(a.b)("img",Object(o.a)({parentName:"a"},{src:"https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a",alt:"docs-source"})))),Object(a.b)("p",null,"You may wonder: what is the difference between components and blocks? Aren't they the same thing?"),Object(a.b)("p",null,"They are similar, but not the same. Components are, for lack of a better word, ",Object(a.b)("em",{parentName:"p"},"dumb"),". They aren't bothered with the context and they are ",Object(a.b)("strong",{parentName:"p"},"reusable"),".\nThis is the keyword in this whole ordeal. One component may be reused in different blocks. Also, the main difference is that the component is not registered in WordPress; its sole purpose is to provide reusable parts for your blocks."),Object(a.b)("p",null,"Let's look at an example.\nFor instance, we want to create a card block. This block consists of an image, a title, and a text."),Object(a.b)("h3",{id:"folder-structure"},"Folder structure"),Object(a.b)("p",null,"First, we'll create a block in the ",Object(a.b)("inlineCode",{parentName:"p"},"src/blocks/custom/card")," folder. The folder structure will look like this"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"|card\n| |components\n| | |card-editor.js\n| | |card-options.js\n| |card-block.js\n| |card.php\n| |card-style.scss\n| |manifest.json\n")),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"manifest.json")," will hold all the default attributes and data about the new block"),Object(a.b)("h3",{id:"manifest"},"Manifest"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-json"}),'{\n  "blockName": "card",\n  "title": "Card",\n  "description" : "Card with custom settings.",\n  "category": "eightshift",\n  "icon": {\n    "src": "buddicons-buddypress-logo"\n  },\n  "keywords": [\n    "Service",\n    "Box",\n    "Card"\n  ],\n  "hasWrapper": false,\n  "parent": [\n    "eightshift-boilerplate/cards-grid"\n  ],\n  "attributes": {\n    "media": {\n      "type": "object",\n      "default": {\n        "id": 0,\n        "url": "",\n        "title": ""\n      },\n      "items": {\n        "type": "object"\n      },\n      "mediaAction": true\n    },\n    "heading": {\n      "type": "string"\n    },\n    "paragraph": {\n      "type": "string"\n    }\n  }\n}\n')),Object(a.b)("h3",{id:"components"},"Components"),Object(a.b)("p",null,"Next, we want to set up the editor and options component for this block. So in the ",Object(a.b)("inlineCode",{parentName:"p"},"components")," folder, we'll add ",Object(a.b)("inlineCode",{parentName:"p"},"card-editor.js")," and ",Object(a.b)("inlineCode",{parentName:"p"},"card-options.js")," files."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"card-editor.js")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"import React from 'react'; // eslint-disable-line no-unused-vars\nimport { RichText } from '@wordpress/editor';\nimport { __ } from '@wordpress/i18n';\nimport { ImageEditor } from '../../../components/image/components/image-editor';\n\nexport const CardEditor = (props) => {\n  const {\n    attributes: {\n      blockClass,\n      heading,\n      paragraph,\n      media,\n    },\n    actions: {\n      onChangeHeading,\n      onChangeParagraph,\n    },\n  } = props;\n\n  return (\n    <div className={blockClass}>\n      <div className={`${blockClass}__media`}>\n        <ImageEditor\n          blockClass={blockClass}\n          media={media}\n        />\n      </div>\n      <div className={`${blockClass}__content`}>\n        <div className={`${blockClass}__heading`}>\n          <RichText\n            placeholder={__('Add Heading', 'eightshift-boilerplate')}\n            onChange={onChangeHeading}\n            value={heading}\n          />\n        </div>\n        <div className={`${blockClass}__paragraph`}>\n          <RichText\n            placeholder={__('Add Paragraph', 'eightshift-boilerplate')}\n            onChange={onChangeParagraph}\n            value={paragraph}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n")),Object(a.b)("p",null,"Notice how we've imported the ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/blob/develop/blocks/init/src/blocks/components/image/components/image-editor.js"}),Object(a.b)("inlineCode",{parentName:"a"},"image-editor"))," component from the project's component folder. Note that in your project you'd just copy this component from the frontend-libs blocks (that is you'd copy the entire folder in your project as previously described)."),Object(a.b)("p",null,"Our card editor component will have an ",Object(a.b)("inlineCode",{parentName:"p"},"<ImageEditor />")," component and two ",Object(a.b)("inlineCode",{parentName:"p"},"<RichText />")," components (which come from the core editor)."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"card-options.js")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"import React from 'react'; // eslint-disable-line no-unused-vars\nimport { __ } from '@wordpress/i18n';\nimport { PanelBody } from '@wordpress/components';\nimport { ImageOptions } from '../../../components/image/components/image-options';\n\nexport const CardOptions = (props) => {\n  const {\n    attributes: {\n      media,\n    },\n    actions: {\n      onChangeMedia,\n    },\n  } = props;\n\n  return (\n    <PanelBody title={__('Card Details', 'eightshift-boilerplate')}>\n      <ImageOptions\n        media={media}\n        onChangeMedia={onChangeMedia}\n      />\n    </PanelBody>\n  );\n};\n")),Object(a.b)("p",null,"The options component (the one shown on the right side in the editor screen), will only contain the ",Object(a.b)("inlineCode",{parentName:"p"},"<ImageOptions />")," so that we can upload image in our block."),Object(a.b)("h3",{id:"editor-render"},"Editor render"),Object(a.b)("p",null,"Back to the block, we need to create the ",Object(a.b)("inlineCode",{parentName:"p"},"edit")," method functionality and the view that we'll render on the front."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"card-block.js")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"import React from 'react'; // eslint-disable-line no-unused-vars\nimport { Fragment } from '@wordpress/element';\nimport { InspectorControls } from '@wordpress/editor';\nimport { getActions } from 'EighshiftBlocksGetActions';\nimport manifest from './manifest.json';\nimport { CardEditor } from './components/card-editor';\nimport { CardOptions } from './components/card-options';\nimport './hooks';\n\nexport const Card = (props) => {\n\n  const {\n    attributes,\n  } = props;\n\n  const actions = getActions(props, manifest);\n\n  return (\n    <Fragment>\n      <InspectorControls>\n        <CardOptions\n          attributes={attributes}\n          actions={actions}\n        />\n      </InspectorControls>\n      <CardEditor\n        attributes={attributes}\n        actions={actions}\n      />\n    </Fragment>\n  );\n};\n")),Object(a.b)("p",null,"Here we'll use our ready-made component (built out of other components - reusability), and wrap it in ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"https://reactjs.org/docs/fragments.html"}),"React Fragment"),". It is a pattern used to return multiple elements."),Object(a.b)("p",null,"Another thing you'll note is the usage of ",Object(a.b)("inlineCode",{parentName:"p"},"<InspectorControls />")," ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/WordPress/gutenberg/tree/master/packages/block-editor/src/components/inspector-controls"}),"component"),". It is used to display settings of the block in the sidebar (in our case our options that contain the image upload component).\nLastly, both our ",Object(a.b)("inlineCode",{parentName:"p"},"<CardEditor />")," and ",Object(a.b)("inlineCode",{parentName:"p"},"<InspectorControls />")," are wrapped in the ",Object(a.b)("inlineCode",{parentName:"p"},"<Fragment />")," wrapper due to Reacts one top-level element rule. If your block doesn't have options, you can only have ",Object(a.b)("inlineCode",{parentName:"p"},"<CardEditor />")," component in here."),Object(a.b)("h3",{id:"php-view"},"PHP view"),Object(a.b)("p",null,"So all we need now is the PHP view."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"card.php")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"<?php\n/**\n * Template for the Card Block.\n *\n * @since 1.0.0\n * @package Eightshift_Boilerplate\\Blocks.\n */\n\nnamespace Eightshift_Boilerplate\\Blocks;\n\n$heading   = $attributes['heading'] ?? '';\n$paragraph = $attributes['paragraph'] ?? '';\n$media     = $attributes['media'] ?? [];\n\n$block_class = $attributes['blockClass'] ?? '';\n\n?>\n\n<div class=\"<?php echo esc_attr( $block_class ); ?>\">\n\n  <?php if ( ! empty( $media ) ) { ?>\n    <div class=\"<?php echo esc_attr( \"{$block_class}__media\" ); ?>\">\n      <?php $this->render_block_view(\n        '/components/image/image.php',\n        [\n          'blockClass' => $attributes['blockClass'] ?? '',\n          'media'      => $media,\n        ]\n      );\n      ?>\n    </div>\n  <?php } ?>\n\n  <div class=\"<?php echo esc_attr( \"{$block_class}__content\" ); ?>\">\n    <?php if ( ! empty( $heading ) ) { ?>\n      <div class=\"<?php echo esc_attr( \"{$block_class}__heading\" ); ?>\">\n        <?php echo wp_kses_post( $heading ); ?>\n      </div>\n    <?php } ?>\n\n    <?php if ( ! empty( $paragraph ) ) { ?>\n      <div class=\"<?php echo esc_attr( \"{$block_class}__paragraph\" ); ?>\">\n        <?php echo wp_kses_post( $paragraph ); ?>\n      </div>\n    <?php } ?>\n  </div>\n\n</div>\n\n")),Object(a.b)("p",null,"Notice how we used"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"<?php $this->render_block_view(\n  '/components/image/image.php',\n  [\n    'blockClass' => $attributes['blockClass'] ?? '',\n    'media'      => $media,\n  ]\n);\n?>\n")),Object(a.b)("p",null,"To render out our ",Object(a.b)("inlineCode",{parentName:"p"},"image")," component. Again, we're showing the power of reusability here."),Object(a.b)("h3",{id:"styling"},"Styling"),Object(a.b)("p",null,"You can style them how you want, but we added some default styles"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"card-style.scss")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-scss"}),"$block-card: (\n  heading: (\n    mobile: (\n      font-size: 24px,\n      line-height: 1.33,\n    ),\n  ),\n  paragraph: (\n    mobile: (\n      font-size: 18px,\n      line-height: 1.5,\n    ),\n  ),\n);\n\n.block-card {\n  $this: &;\n\n  &__media {\n    margin-bottom: 25px;\n  }\n\n  &__img {\n    margin: 0 auto;\n  }\n\n  &__content {\n    text-align: center;\n  }\n\n  &__heading {\n    @include responsive($block-card, heading);\n    font-weight: bold;\n  }\n\n  &__paragraph {\n    @include responsive($block-card, paragraph);\n    margin-top: 15px;\n  }\n}\n")))}p.isMDXComponent=!0},252:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return h}));var o=t(0),r=t.n(o);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=r.a.createContext({}),p=function(e){var n=r.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s({},n,{},e)),t},d=function(e){var n=p(e.components);return r.a.createElement(l.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},m=Object(o.forwardRef)((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(t),m=o,h=d["".concat(i,".").concat(m)]||d[m]||b[m]||a;return t?r.a.createElement(h,s({ref:n},l,{components:t})):r.a.createElement(h,s({ref:n},l))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=m;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=t[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);
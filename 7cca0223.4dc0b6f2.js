(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{193:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return i})),a.d(t,"rightToc",(function(){return b})),a.d(t,"default",(function(){return c}));var n=a(1),l=a(9),r=(a(0),a(252)),o={id:"blocks-styles",title:"Styles",sidebar_label:"Styles"},i={id:"basics/blocks-styles",title:"Styles",description:"[![docs-source](https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a)](https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/)",source:"@site/docs/basics/blocks-styles.md",permalink:"/eightshift-docs/docs/basics/blocks-styles",sidebar_label:"Styles",sidebar:"docs",previous:{title:"Reusable Blocks",permalink:"/eightshift-docs/docs/basics/blocks-reusable"},next:{title:"Storybook",permalink:"/eightshift-docs/docs/basics/blocks-storybook"}},b=[{value:"Setup",id:"setup",children:[]},{value:"Details",id:"details",children:[]},{value:"Global variables",id:"global-variables",children:[]},{value:"Variable Defaults",id:"variable-defaults",children:[]},{value:"Color variables",id:"color-variables",children:[]},{value:"Complex attribute variables",id:"complex-attribute-variables",children:[{value:"Variable as a string:",id:"variable-as-a-string",children:[]},{value:"Variable as an object:",id:"variable-as-an-object",children:[]}]},{value:"Boolean variables",id:"boolean-variables",children:[]},{value:"Custom variables",id:"custom-variables",children:[]},{value:"Manual variables",id:"manual-variables",children:[]},{value:"Manual variables inside the Block editor",id:"manual-variables-inside-the-block-editor",children:[]}],s={rightToc:b};function c(e){var t=e.components,a=Object(l.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/infinum/eightshift-frontend-libs/tree/develop/blocks/init/src/blocks/"}),Object(r.b)("img",Object(n.a)({parentName:"a"},{src:"https://img.shields.io/badge/source-eigthshift--frontend--libs-yellow?style=for-the-badge&logo=javascript&labelColor=2a2a2a",alt:"docs-source"})))),Object(r.b)("p",null,"We decided to remove all support for IE 11.  That decision opened up doors that lead to new, awesome features and all the cool stuff. One of those features is CSS variables with block manifest and global settings."),Object(r.b)("p",null,"Let's dig into the implementation of CSS variables in your project."),Object(r.b)("h2",{id:"setup"},"Setup"),Object(r.b)("p",null,"To be able to use CSS variables you need to implement two helpers in your blocks/components: ",Object(r.b)("inlineCode",{parentName:"p"},"outputCssVariables")," and ",Object(r.b)("inlineCode",{parentName:"p"},"getUnique"),". For more details on these helpers, you can read ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"helpers-javascript#outputcssvariables"}),"here"),". "),Object(r.b)("p",null,"There are a few differences between the JavaScript and PHP implementation due to a way React handles component re-rendering."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"typography-editor.js")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import React, { useMemo } from 'react';\nimport { outputCssVariables, getUnique } from '@eightshift/frontend-libs/scripts/editor';\nimport manifest from '../manifest.json';\n\nexport const TypographyEditor = (attributes) => {\n\n    // We need to use memo in order to optimise component re-rendering.\n    const unique = useMemo(() => getUnique(), []);\n\n    return (\n        <>\n            {outputCssVariables(attributes, manifest, unique)}\n\n            <div data-id={unique}>\n                {/*Regular component implementation*/}\n            </div>\n        </>\n    );\n};\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"typography.php")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),'/**\n * Template for the Typography Component.\n *\n * @package Eightshift_Boilerplate\n */\n\nuse EightshiftLibs\\Helpers\\Components;\n\n$manifest = Components::getManifest(__DIR__);\n\n$unique = Components::getUnique();\necho Components::outputCssVariables($attributes, $manifest, $unique); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped\n\n?>\n\n<div data-id="<?php echo esc_attr($unique); ?>">\n    // Regular component implementation\n</div>\n')),Object(r.b)("p",null,"Now that we have helpers in place, let's see how they work and what features they offer."),Object(r.b)("h2",{id:"details"},"Details"),Object(r.b)("p",null,"CSS variables helper consists of 2 helpers. ",Object(r.b)("inlineCode",{parentName:"p"},"outputCssVariables")," helper will output all CSS variables set in your blocks/component manifest and ",Object(r.b)("inlineCode",{parentName:"p"},"getUnique")," helper will make sure that variables are applied only to the exact block/component."),Object(r.b)("p",null,"If you check your rendered website you can see that you have something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<style>\n    .typography[data-id=\'210c9bbf733ef5c6aa74c49168ac29a7\'] {\n        --typography-color: var(--global-colors-black);\n        --typography-content-align: left;\n    }\n</style>\n\n<div class="typography" data-id="210c9bbf733ef5c6aa74c49168ac29a7">...</div>\n')),Object(r.b)("p",null,"This is all that's required for the magic of CSS variables to work! Now let's see it in action and check out all additional features you can use."),Object(r.b)("h2",{id:"global-variables"},"Global variables"),Object(r.b)("p",null,"Now that we know how CSS variables are generated, we have one more helper to describe.\nThe ",Object(r.b)("inlineCode",{parentName:"p"},"outputCssVariablesGlobal(globalSettings);")," helper is called in the ",Object(r.b)("inlineCode",{parentName:"p"},"application-blocks-editor.js")," file. It is used to output all CSS variables from the global manifest under the ",Object(r.b)("inlineCode",{parentName:"p"},"globalVariables")," key, into the ",Object(r.b)("inlineCode",{parentName:"p"},":root")," selector."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"All of these variables are available to use inside your blocks/components.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Global Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "namespace": "eightshift-boilerplate",\n    "background": "#D8262C",\n    "foreground": "#FFFFFF",\n    "globalVariables": {\n        "customBlocksName": "eightshift-block",\n        "maxCols": 12,\n        "breakpoints": {\n            "mobile": 479,\n            "tablet": 1279,\n            "desktop": 1919,\n            "large": 1920\n        },\n        "containers": {\n            "default": "1330px"\n        },\n        "gutters": {\n            "none": "0",\n            "default": "25px",\n            "big": "50px"\n        },\n        "sectionSpacing": {\n            "min":  -300,\n            "max":  300,\n            "step": 10\n        },\n        "sectionInSpacing": {\n            "min":  0,\n            "max":  300,\n            "step": 10\n        },\n        "colors": [\n            {\n                "name": "Black",\n                "slug": "black",\n                "color": "#111111"\n            },\n            {\n                "name": "White",\n                "slug": "white",\n                "color": "#FFFFFF"\n            }\n        ]\n    }\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),"<style>\n    :root {\n        --global-custom-blocks-name: eightshift-block;\n        --global-max-cols: 12;\n        --global-breakpoints-mobile: 479;\n        --global-breakpoints-tablet: 1279;\n        --global-breakpoints-desktop: 1919;\n        --global-breakpoints-large: 1920;\n        --global-containers-default: 1330px;\n        --global-gutters-none: 0;\n        --global-gutters-default: 25px;\n        --global-gutters-big: 50px;\n        --global-section-spacing-min: -300;\n        --global-section-spacing-max: 300;\n        --global-section-spacing-step: 10;\n        --global-section-in-spacing-min: 0;\n        --global-section-in-spacing-max: 300;\n        --global-section-in-spacing-step: 10;\n        --global-colors-black: #111111;\n        --global-colors-white: #FFFFFF;\n    }\n</style>\n")),Object(r.b)("p",null,"You can use a global variable like any other CSS variable:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"color: var(--global-colors-white);\n")),Object(r.b)("h2",{id:"variable-defaults"},"Variable Defaults"),Object(r.b)("p",null,"As we said in the beginning, all CSS variables are defined within the block/component manifest. To avoid outputting all of the variables (because you might not need them all), the attributes that will be output as variables need to be defined."),Object(r.b)("p",null,"To output an attribute as a CSS variable, you need to set the ",Object(r.b)("inlineCode",{parentName:"p"},"variable")," key to ",Object(r.b)("inlineCode",{parentName:"p"},"default"),". This way you will get the output of the default value or value set in the database."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        "typographySize": {\n            "type": "string",\n            "default": "120-default",\n            "variable": "default"\n        }\n    },\n    "options": {\n        "typographySize": [\n            {\n                "label": "180 Display",\n                "value": "180-default"\n            },\n            {\n                "label": "120 Display",\n                "value": "120-default"\n            },\n            {\n                "label": "80 Display",\n                "value": "80-default"\n            }\n        ]\n    }\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-size: 120-default\n")),Object(r.b)("h2",{id:"color-variables"},"Color variables"),Object(r.b)("p",null,"If you have an attribute that represent colors from global variables, you can output the CSS variable for color directly."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        "typographyColor": {\n            "type": "string",\n            "default": "white",\n            "variable": "color"\n        }\n    },\n    "options": {\n        "typographyColor": [\n            {\n                "name": "White",\n                "slug": "white",\n                "color": "#ffffff"\n            },\n            {\n                "name": "Black",\n                "slug": "black",\n                "color": "#111111"\n            },\n        ]\n    }\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-color: var(--global-colors-white);\n")),Object(r.b)("h2",{id:"complex-attribute-variables"},"Complex attribute variables"),Object(r.b)("p",null,"If you have attributes stored as objects (for example used in the ",Object(r.b)("inlineCode",{parentName:"p"},"SelectControl")," component), by default CSS variable generator will output the ",Object(r.b)("inlineCode",{parentName:"p"},"value")," stored in the attribute.\nSetting the ",Object(r.b)("inlineCode",{parentName:"p"},"variable")," key to ",Object(r.b)("inlineCode",{parentName:"p"},"select"),", the CSS variable generator will look for the ",Object(r.b)("inlineCode",{parentName:"p"},"variable")," key in the manifest ",Object(r.b)("inlineCode",{parentName:"p"},"options")," field."),Object(r.b)("p",null,"If the ",Object(r.b)("inlineCode",{parentName:"p"},"variable")," key is not set in options, the ",Object(r.b)("inlineCode",{parentName:"p"},"value")," key will be used as fallback."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"You can write any CSS declaration or variable in the custom variable key.")),Object(r.b)("h3",{id:"variable-as-a-string"},"Variable as a string:"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        "typographySize": {\n            "type": "string",\n            "default": "120-default",\n            "variable": "select"\n        }\n    },\n    "options": {\n        "typographySize": [\n            {\n                "label": "180 Display",\n                "value": "180-default",\n                "variable": "180px"\n            },\n            {\n                "label": "120 Display",\n                "value": "120-default",\n                "variable": "0.12em"\n            },\n            {\n                "label": "80 Display",\n                "value": "80-default",\n                "variable": "80%"\n            }\n        ]\n    }\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-size: 0.12em;\n")),Object(r.b)("h3",{id:"variable-as-an-object"},"Variable as an object:"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        "typographySize": {\n            "type": "string",\n            "default": "80-default",\n            "variable": "select"\n        }\n    },\n    "options": {\n        "typographySize": [\n            {\n                "label": "180 Display",\n                "value": "180-default",\n                "variable": "180px"\n            },\n            {\n                "label": "120 Display",\n                "value": "120-default",\n                "variable": "0.12em"\n            },\n            {\n                "label": "80 Display",\n                "value": "80-default",\n                "variable": {\n                    "font-size": "80px",\n                    "line-height": "1.5"\n                }\n            }\n        ]\n    }\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-size-font-size: 80px;\n--typography-size-line-height: 1.5;\n")),Object(r.b)("h2",{id:"boolean-variables"},"Boolean variables"),Object(r.b)("p",null,"By default, the CSS variable generator will output values stored in attributes. That means that boolean variables will get output as variables with ",Object(r.b)("inlineCode",{parentName:"p"},"true")," and ",Object(r.b)("inlineCode",{parentName:"p"},"false")," values, which might be something you don't want.\nIf you set the ",Object(r.b)("inlineCode",{parentName:"p"},"variable")," key to ",Object(r.b)("inlineCode",{parentName:"p"},"boolean"),", the CSS variable generator will look for the ",Object(r.b)("inlineCode",{parentName:"p"},"index")," array in the manifest options. The first value reprents the value if attribute is ",Object(r.b)("inlineCode",{parentName:"p"},"false"),", and the second when it's ",Object(r.b)("inlineCode",{parentName:"p"},"true"),"."),Object(r.b)("p",null,"If the ",Object(r.b)("inlineCode",{parentName:"p"},"variable")," key is not set in options, the fallback is to output the value inside the CSS variable."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"You can write any CSS declaration or variable in the custom variable key.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        "typographyUse": {\n            "type": "boolean",\n            "default": true,\n            "variable": "boolean"\n        }\n    },\n    "options": {\n        "typographyUse": [\n            "none",\n            "block"\n        ]\n    }\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--typography-use: block;\n")),Object(r.b)("h2",{id:"custom-variables"},"Custom variables"),Object(r.b)("p",null,"If you need a more complex setup with multiple variables for a single attribute value you can use the ",Object(r.b)("inlineCode",{parentName:"p"},"custom")," key. It will output the CSS variables based on values defined in the ",Object(r.b)("inlineCode",{parentName:"p"},"options"),". Each custom variable key must be an ",Object(r.b)("inlineCode",{parentName:"p"},"object"),"."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        "imageAlign": {\n            "type": "string",\n            "default": "center center",\n            "variable": "custom"\n        }\n    },\n    "options": {\n        "imageAlign": {\n            "top left": {\n                "horizontal": "flex-start",\n                "vertical": "flex-start"\n            },\n            "top center": {\n                "horizontal": "center",\n                "vertical": "flex-start"\n            },\n            "top right": {\n                "horizontal": "flex-end",\n                "vertical": "flex-start"\n            },\n            "center left": {\n                "horizontal": "flex-start",\n                "vertical": "center"\n            },\n            "center center": {\n                "horizontal": "center",\n                "vertical": "center"\n            },\n            "center right": {\n                "horizontal": "flex-end",\n                "vertical": "center"\n            },\n            "bottom left": {\n                "horizontal": "flex-start",\n                "vertical": "flex-end"\n            },\n            "bottom center": {\n                "horizontal": "center",\n                "vertical": "flex-end"\n            },\n            "bottom right": {\n                "horizontal": "flex-end",\n                "vertical": "flex-end"\n            }\n        }\n    },\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--image-align: center center; \n--image-align-horizontal: center;\n--image-align-vertical: center;\n")),Object(r.b)("h2",{id:"manual-variables"},"Manual variables"),Object(r.b)("p",null,"There is an option to add custom CSS variables that get output independently from all the attributes. Just add a top-level ",Object(r.b)("inlineCode",{parentName:"p"},"variables")," key inside the manifest and add each variable as an array item.\nManual variables will be added at the end of the output."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        // ...\n    },\n    "variables": [\n        "--variable1: test1",\n        "--variable2: test2",\n        "--variable3: test3"\n    ]\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--variable1: test1;\n--variable2: test2;\n--variable3: test3;\n")),Object(r.b)("h2",{id:"manual-variables-inside-the-block-editor"},"Manual variables inside the Block editor"),Object(r.b)("p",null,"If you want to add manual variables that only apply inside the Block editor you can use the ",Object(r.b)("inlineCode",{parentName:"p"},"variablesEditor")," key. Everything works the same as described in the ",Object(r.b)("em",{parentName:"p"},"Manual variables")," section.\nIf you define both ",Object(r.b)("inlineCode",{parentName:"p"},"variablesEditor")," and ",Object(r.b)("inlineCode",{parentName:"p"},"variables"),", both will be output in the editor, but only ",Object(r.b)("inlineCode",{parentName:"p"},"variables")," will be output on the frontend."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Manifest:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "attributes": {\n        // ...\n    },\n    "variablesEditor": [\n        "--variable1: test1",\n        "--variable2: test2",\n        "--variable3: test3"\n    ]\n}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Output:")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"--variable1: test1;\n--variable2: test2;\n--variable3: test3;\n")))}c.isMDXComponent=!0},252:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),l=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=l.a.createContext({}),c=function(e){var t=l.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i({},t,{},e)),a},p=function(e){var t=c(e.components);return l.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,o=e.parentName,s=b(e,["components","mdxType","originalType","parentName"]),p=c(a),d=n,m=p["".concat(o,".").concat(d)]||p[d]||u[d]||r;return a?l.a.createElement(m,i({ref:t},s,{components:a})):l.a.createElement(m,i({ref:t},s))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=d;var i={};for(var b in t)hasOwnProperty.call(t,b)&&(i[b]=t[b]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var s=2;s<r;s++)o[s]=a[s];return l.a.createElement.apply(null,o)}return l.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);